# ==========================================
# PRODUCTION CONFIGURATION
# ==========================================
# IMPORTANT: This file contains production-ready security settings
# Ensure all environment variables are properly configured before deployment

# Security Configuration - PRODUCTION MODE
# CRITICAL: These settings enforce secure OTP handling
app.security.environment=prod
app.security.hash-otp=true
app.security.max-login-attempts=5
app.security.lockout-duration-minutes=30

# Production: Hide error details (security best practice)
server.error.include-stacktrace=never
server.error.include-message=never
server.error.include-binding-errors=never

# JPA Configuration - Production optimized
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.open-in-view=false

# Logging Configuration - Production levels
logging.level.com.cloudkitchen.rbac=INFO
logging.level.org.springframework.security=WARN
logging.level.org.springframework.web=WARN
logging.level.org.hibernate.SQL=WARN

# CORS Configuration - MUST be explicitly set
# DO NOT use wildcard (*) in production
# Set CORS_ALLOWED_ORIGINS environment variable to comma-separated list of allowed origins
# Example: https://app.example.com,https://admin.example.com

# Database Migrations - ENABLED in production
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true

# Performance - Production optimized
spring.main.lazy-initialization=false

# DevTools - DISABLED in production
spring.devtools.restart.enabled=false
spring.devtools.livereload.enabled=false

# S3 Configuration - Validate on startup
aws.s3.validate-on-startup=true

# Session Configuration - Secure cookies
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict

# JWT Configuration - Recommended production values
# Access token: 1 hour (3600 seconds) - recommended for production
# Refresh token: 7 days (604800 seconds)
# Override with environment variables if needed:
# JWT_ACCESS_EXPIRY=3600
# JWT_REFRESH_EXPIRY=604800
